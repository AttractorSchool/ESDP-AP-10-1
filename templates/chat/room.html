{% load static %}
<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8"/>
    <title>Chat Room</title>
    <link rel="stylesheet" type="text/css" href="{% static 'css/chat.css' %}">
    <script src="https://cdn.jsdelivr.net/gh/centrifugal/centrifuge-js@2.8.3/dist/centrifuge.min.js"></script>
</head>

<body>
<ul id="chat-thread" class="chat-thread">
    {% for message in old_messages %}
    {% if message.user.email == request.user.email %}
    <li class="current-user"><strong></strong> {{ message.message }}</li>
    {% else %}
    <li class="other-user"><strong></strong> {{ message.message }}</li>
    {% endif %}
    {% endfor %}
</ul>
<div class="chat-message">
    <input id="chat-message-input" class="chat-message-input" type="text" autocomplete="off" autofocus/>
</div>
{{ room_uuid|json_script:"room-id" }}

{% block extrajs %}
<script src="{% static 'js/room.js' %}"></script>
{% endblock %}
<script>
window.onload = function() {
    var chatThread = document.getElementById('chat-thread');
    chatThread.scrollTop = chatThread.scrollHeight;
};
</script>
</body>

</html>